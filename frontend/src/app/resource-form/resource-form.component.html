<div
  class="resource-detail mat-typography"
>
  <app-loading
    *ngIf="state === pageState.LOADING"
    message="Loading..."
  ></app-loading>

  <form
    *ngIf="state === pageState.SHOW_FORM"
    [formGroup]="form"
    class="pad-2"
  >
    <h1>Resource Details</h1>

    <formly-form
      [form]="form"
      [model]="model"
      [fields]="fields"
      [options]="options"
    >
    </formly-form>

    <div
      class="button-row"
      fxLayout="row"
      fxLayoutGap="2em"
    >
      <button
        *ngIf="form"
        mat-flat-button
        type="button"
        (click)="saveDraft()"
        color="primary"
        [disabled]="!form.valid"
        id="save-draft-button"
      >Save As Draft</button>
      <div *ngIf="currentUser && currentUser.permissions.includes('publish_resource')">
        <button
          *ngIf="form"
          mat-flat-button
          type="button"
          (click)="savePublish()"
          color="primary"
          [disabled]="!form.valid"
          id="save-publish-button"
        >Save & Publish</button>
      </div>
      <button
        *ngIf="form"
        mat-flat-button
        type="button"
        (click)="onCancel()"
        color="accent"
        id="cancel-button"
      >Cancel</button>

      <button
        type="button"
        mat-flat-button
        *ngIf="!showConfirmDelete && !createNew"
        (click)="showDelete()"
        color="warn"
        id="delete-button"
      >Delete</button>

      <button
        *ngIf="showConfirmDelete"
        id="confirm_delete"
        type="button"
        mat-flat-button
        (click)="onDelete()"
        color="warn"
        id="permanently-delete-button"
      >Permanently Delete This Resource!!!
      </button>
    </div>
  </form>
</div>
